<!DOCTYPE html>
<html lang="en">
<head>
  <title>Connection Ϟ Required  // ActiveResource XML bug fix for Rails 3.0.19 </title>

  <meta charset="utf-8">
  <meta name="author" content="Zach Moazeni">

  <link href="/v2013/css/main.css?v=1" media="screen" rel="stylesheet" type="text/css" />
  <link href="/v2013/css/pygments-github.css" media="screen" rel="stylesheet" type="text/css" />
  <link rel="alternate" type="application/atom+xml" title="Connection Required" href="/v2013/feed/atom/" />
</head>
<body>
  <nav>
    <ul>
      <li><a href="/v2013/">Connection Ϟ Required</a></li>
      <li><a href="/v2013/highlighted">Highlighted</a></li>
      <li><a href="/v2013/about">About</a></li>
    </ul>
  </nav>


  <article id="main">
    <h1><cite>ActiveResource XML bug fix for Rails 3.0.19</cite></h1>
    <time datetime="2013-01-10T10:24:49-05:00">10 January 2013</time>

    <p><em>Originally posted to <a href="http://techtime.getharvest.com/blog/activeresource-xml-bug-fix-for-rails-3-dot-0-19">http://techtime.getharvest.com/blog/activeresource-xml-bug-fix-for-rails-3-dot-0-19</a>.</em></p>

<p>The past two weeks have been abuzz with security patches for Rails. <a href="http://weblog.rubyonrails.org/2013/1/8/Rails-3-2-11-3-1-10-3-0-19-and-2-3-15-have-been-released/">Yesterday’s in particular</a> is quite serious, and if you haven’t upgraded yet, you really should.</p>

<p>This morning, we noticed an issue with a few of our applications that are still running Rails v3.0.x. There is currently a bug for security-patched Rails v3.0 applications serving XML data to ActiveResource consumers (think of a typical Rails XML API).</p>

<p>This bug was noticed <a href="https://github.com/rails/rails/pull/492">2 years ago</a> by <a href="https://github.com/jaw6">jaw6</a> and his fix was committed to Rails v3.2 and v3.1, but not v3.0. This wasn’t an issue until yesterday’s security upgrade.</p>

<p>Now if the latest version of ActiveResource requests XML data from a Rails v3.0 server, they may raise an odd error <code class="highlighter-rouge">Hash::DisallowedType: Disallowed type attribute: "yaml"</code></p>

<p>We have just had a <a href="https://github.com/rails/rails/pull/8853">pull request</a> merged into Rails that will fix this issue in v3.0.20 and should be released soon. Until then, if you need to apply this immediately you can have Bundler use this code directly from GitHub:</p>

<pre><code>
# In your Gemfile
gem "rails", :git =&gt; 'https://github.com/rails/rails.git', :branch =&gt; '3-0-stable'
</code></pre>

  </article>


<footer>
  &copy; 2007-2017 Zach Moazeni
</footer>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1484071-4']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>

