<!DOCTYPE html>
<html lang="en">
<head>
  <title>Connection Ϟ Required  // Custom Textmate Commands </title>

  <meta charset="utf-8">
  <meta name="author" content="Zach Moazeni">

  <link href="/v2013/css/main.css?v=1" media="screen" rel="stylesheet" type="text/css" />
  <link href="/v2013/css/pygments-github.css" media="screen" rel="stylesheet" type="text/css" />
  <link rel="alternate" type="application/atom+xml" title="Connection Required" href="/v2013/feed/atom/" />
</head>
<body>
  <nav>
    <ul>
      <li><a href="/v2013/">Connection Ϟ Required</a></li>
      <li><a href="/v2013/highlighted">Highlighted</a></li>
      <li><a href="/v2013/about">About</a></li>
    </ul>
  </nav>


  <article id="main">
    <h1><cite>Custom Textmate Commands</cite></h1>
    <time datetime="2008-04-01T15:31:20-04:00">01 April 2008</time>

    <p><a href="http://macromates.com/">Textmate</a> is a pretty decent editor for OSX. I’m not in love with it, but I use it frequently.</p>

<p>There is a plethora of plugins for Textmate to ease editing in different contexts, but sometimes you want to hack you’re own commands.</p>

<p>For small scripting tasks, I tend to continue to use <a href="http://www.ruby-lang.org/en/">ruby</a>. So I enjoy it when I can continue using it for the commands.</p>

<p>You can typically use this shell for a ruby command, and your printed output gets replaced within Textmate:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">#!/usr/bin/env ruby</span>
<span class="vg">$:</span> <span class="o">&lt;&lt;</span> <span class="no">ENV</span><span class="p">[</span><span class="s1">'TM_SUPPORT_PATH'</span><span class="p">]</span> <span class="o">+</span> <span class="s1">'/lib'</span>
<span class="n">input_from_tm</span> <span class="o">=</span> <span class="no">STDIN</span><span class="p">.</span><span class="nf">read</span>
<span class="nb">puts</span> <span class="s2">"hello world!"</span>
</code></pre>
</div>

<p>Here is an example of code block toggling for Markdown.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">#!/usr/bin/env ruby</span>
<span class="vg">$:</span> <span class="o">&lt;&lt;</span> <span class="no">ENV</span><span class="p">[</span><span class="s1">'TM_SUPPORT_PATH'</span><span class="p">]</span> <span class="o">+</span> <span class="s1">'/lib'</span>

<span class="n">s</span> <span class="o">=</span> <span class="no">STDIN</span><span class="p">.</span><span class="nf">read</span>
<span class="n">ends_with_newline</span> <span class="o">=</span> <span class="n">s</span> <span class="o">!=</span> <span class="n">s</span><span class="p">.</span><span class="nf">chomp</span>
<span class="n">lines</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
<span class="n">lines</span><span class="p">.</span><span class="nf">each_with_index</span> <span class="k">do</span> <span class="o">|</span><span class="n">s</span><span class="p">,</span> <span class="n">index</span><span class="o">|</span>
  <span class="n">s</span> <span class="o">=~</span> <span class="sr">/^(\t)?(.*)/</span>

  <span class="k">if</span> <span class="vg">$1</span>
    <span class="nb">print</span> <span class="s2">"</span><span class="si">#{</span><span class="vg">$2</span><span class="si">}</span><span class="s2">"</span>
  <span class="k">else</span>
    <span class="nb">print</span> <span class="s2">"</span><span class="se">\t</span><span class="si">#{</span><span class="vg">$2</span><span class="si">}</span><span class="s2">"</span>
  <span class="k">end</span>

  <span class="nb">print</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span> <span class="k">if</span> <span class="n">index</span> <span class="o">!=</span> <span class="n">lines</span><span class="p">.</span><span class="nf">size</span> <span class="o">-</span> <span class="mi">1</span>
<span class="k">end</span>

<span class="nb">print</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span> <span class="k">if</span> <span class="n">ends_with_newline</span>
</code></pre>
</div>

<p>And a screenshot to include the Textmate command options:</p>

<p><a href="/assets/2008/3/29/textmate_markdown_command.png"><img src="/assets/2008/3/29/textmate_markdown_command_small.png" alt="A picture of Textmate Bundle Editor" /></a></p>


  </article>


<footer>
  &copy; 2007-2017 Zach Moazeni
</footer>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1484071-4']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>

